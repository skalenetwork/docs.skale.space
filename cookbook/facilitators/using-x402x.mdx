---
title: "x402x"
description: "Integrate x402x facilitator for advanced payment processing features"
---

x402x is an advanced facilitator service that extends the base x402 protocol with additional features for enterprise use cases. It provides enhanced payment processing, analytics, and customization options.

## Prerequisites

- Node.js and npm installed
- A SKALE Chain endpoint
- Understanding of x402 protocol

## Configuration

### Environment Variables

Create a `.env` file with x402x configuration:

```bash
# Your receiving address
RECEIVING_ADDRESS=0xyour_address_to_receive_payment

# SKALE network configuration
NETWORK_CHAIN_ID=324705682

# Server port
PORT=3000
```

## Basic Integration


<Tabs>
  <Tab title="Server Setup">

```typescript
import { Hono } from "hono";
import { serve } from "@hono/node-server";
import { paymentMiddleware, x402ResourceServer } from "@x402/hono";
import { ExactEvmScheme } from "@x402/evm/exact/server";
import { registerExactEvmScheme } from "@x402/evm/exact/server";
import type { RouteConfig as X402RouteConfig } from "@x402/core/server";
import { HTTPFacilitatorClient } from "@x402/core/server";
import {
  registerRouterSettlement,
  registerSettlementHooks,
  createSettlementRouteConfig,
} from "@x402x/extensions";
import "dotenv/config";

const app = new Hono();
const PORT = Number(process.env.PORT) || 3001;

async function main() {

app.use(
  "/*",
  cors({
    origin: "*",
    credentials: false,
    exposeHeaders: ["PAYMENT-REQUIRED", "PAYMENT-RESPONSE"],
    allowHeaders: [
      "Content-Type",
      "PAYMENT-SIGNATURE",
      "PAYMENT-RESPONSE",
      "X-PAYMENT-SIGNATURE",
      "X-PAYMENT-RESPONSE",
    ],
  }),
);

  const facilitatorUrl = "https://facilitator.x402x.dev";
  const receivingAddress = process.env.RECEIVING_ADDRESS as `0x${string}`;
  const networkChainId = process.env.NETWORK_CHAIN_ID || "324705682";
  const network = `eip155:${networkChainId}`;

  // Initialize x402x facilitator client with authentication
  const facilitatorClient = new HTTPFacilitatorClient({
    url: facilitatorUrl
    });

  const resourceServer = new x402ResourceServer(facilitatorClient);
  registerExactEvmScheme(resourceServer, {
    networks: ["eip155:*"],
  });
  registerRouterSettlement(resourceServer);
  registerSettlementHooks(resourceServer);
  await resourceServer.initialize();

  const routes = {
    "GET /api/premium": createSettlementRouteConfig(
      {
        accepts: {
          scheme: "exact",
          network,
          payTo: receivingAddress,
          price: "$0.01",
        },
      },
      {
        // Dynamic fee: query facilitator /calculate-fee on 402 probe
        facilitatorUrl,
      },
  
    ) as X402RouteConfig,
  };
  app.use("/api/premium", paymentMiddleware(routes, resourceServer));

  app.get("/api/premium", async (c) => {
    console.log("[Server] Weather request received");
    return c.json({
      message: "Premium content unlocked via x402x!",
      features: ["analytics", "webhooks", "rate-limiting"],
      timestamp: new Date().toISOString(),
    });
  });

  serve({ fetch: app.fetch, port }, () => {
    console.log(`Server running on http://localhost:${port}`);
    console.log(`Using x402x facilitator: ${facilitatorUrl}`);
  });
}

main().catch(console.error);
```
  </Tab>
  <Tab title="Client Setup">
    ```typescript
      import { wrapFetchWithPayment } from "x402-fetch";
      import { x402Client } from "@x402/core/client";
      import { registerX402xScheme } from "@x402x/extensions";
      import { privateKeyToAccount } from "viem/accounts";

      import "dotenv/config";

      async function main() {
          const account = privateKeyToAccount(
            process.env.PRIVATE_KEY as `0x${string}`
          );
          const baseUrl = process.env.BASE_URL || "http://localhost:3001";
          const networkChainId = process.env.NETWORK_CHAIN_ID || "324705682";

          const client = new x402Client();
          const networkId = `eip155:${networkChainId}` as `${string}:${string}`;
          registerX402xScheme(client, "eip155:324705682", account);

          const fetchWithPayment = wrapFetchWithPayment(fetch, client);
          
          const fetchWithPayment = wrapFetchWithPayment(
              fetch,
              client
            );

          const premium_url = `${baseUrl}/api/premium`;

          try{
          const response = await fetchWithPayment(premium_url, {
                method: "GET",
                headers: {
                  "Content-Type": "application/json",
                },
              });
          const data = await response.json();
          console.log(data);
          }
          catch(error){
            console.error(
              "[Client] Error:",
              error instanceof Error ? error.message : error
            );
            process.exit(1);
          }

          const response = await fetchWithPayment("/api/premium-content", {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify({ /* your data */ }),
          });
          const result = await response.json();
        }

main();
```

  </Tab>
</Tabs>

## Troubleshooting

### Connection Issues

If you cannot connect to x402x:

1. Verify the facilitator URL is correct
2. Check network connectivity
3. Ensure API credentials are valid
4. Review firewall settings

### Payment Failures

Common causes and solutions:

| Issue | Solution |
|-------|----------|
| Invalid signature | Verify wallet configuration and signing |
| Insufficient balance | Ensure payer has enough tokens |
| Network mismatch | Check chain ID matches configuration |
| Expired authorization | Increase `maxTimeoutSeconds` |

## Next Steps

<CardGroup cols={2}>
  <Card title="Using PayAI" icon="dollar-sign" href="/cookbook/x402/using-payai">
    Alternative hosted facilitator service
  </Card>
  <Card title="Run Your Own" icon="server" href="/cookbook/x402/facilitator">
    Deploy your own facilitator
  </Card>
  <Card title="Accept Payments" icon="credit-card" href="/cookbook/x402/accepting-payments">
    Protect endpoints with payments
  </Card>
  <Card title="Build an Agent" icon="robot" href="/cookbook/agents/build-an-agent">
    Create payment-enabled agents
  </Card>
</CardGroup>

## Resources

- [x402x Documentation](https://www.x402x.dev/docs)
- [x402 Protocol Specification](https://x402.org)

---

<Note>
x402x is a third-party enterprise service. Contact the x402x team for access, custom pricing, and enterprise support.
</Note>
